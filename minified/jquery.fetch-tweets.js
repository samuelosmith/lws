(function(d){var e={username:"",count:2,showUserInfo:true,refreshInterval:60*5,callback:undefined,cache:true};var c=(function(){var h=[[/(^|[\n ])([\w]+?:\/\/[\w]+[^ \"\n\r\t< ]*)/g,'$1<a href="$2">$2</a>'],[/(^|[\n ])((www|ftp)\.[^ \"\t\n\r< ]*)/g,'$1<a href="http://$2">$2</a>'],[/@(\w+)/g,'<a class="tweet-mention" href="http://twitter.com/$1">@$1</a>'],[/#(\w+)/g,'<a class="tweet-hash" href="http://search.twitter.com/search?q=$1">#$1</a>']];var g=h.length;return function(l){var j,k;for(j=0;j<g;j++){k=h[j];l=l.replace(k[0],k[1])}return l}})();var a=function(h){var g;if(h<60){return"just now"}else{if(h<60*60){g=Math.round(h/60);return(g>1)?g+" minutes ago":" 1 minute ago"}else{if(h<60*60*24){g=Math.round(h/(60*60));return(g>1)?g+" hours ago":" 1 hour ago"}else{if(h<60*60*24*7){g=Math.round(h/(60*60*24));return(g>1)?g+" days ago":" yesterday"}else{if(h<60*60*24*7*4){g=Math.round(h/(60*60*24*7));return(g>1)?g+" weeks ago":" last week"}else{g=Math.round(h/(60*60*24*30));return(g>1)?g+" months ago":" last month"}}}}}};var f=function(n,m,j,l){var h="http://search.twitter.com/search.json";var k="?callback=?&rpp="+j+"&q=from:"+m;var g=d("<div>").appendTo(n);var i=false;return function(){if(i){return}i=true;g.html('<div class="tweets-loading">Loading tweets...</div>');d.getJSON(h+k,function(s){var v,r,u,q,p=new Date(),t,o="";if(!s||!s.results){g.html('<div class="error">Error fetching tweets!</div>');return false}v=s.results;r=v.length;for(q=0;q<r;q++){u=v[q];t=a((p-new Date(u.created_at))/1000);o+='<div class="tweet-text">'+c(u.text)+'</div><div class="tweet-created_at"><a href="http://www.twitter.com/'+m+"/status/"+u.id+'">'+t+"</a></div>"}i=false;g.html(o);if(l){l()}})}};var b=function(j,i){var g="http://api.twitter.com/1/users/show.json?callback=?&screen_name=";var h=d('<div class="tweets-userinfo">').appendTo(j);h.html('<div class="tweets-loading">Loading profile data...</div>');d.getJSON(g+i,function(l){var k="";if(!l||typeof l!=="object"){h.html('<div class="error">Error fetching user info!</div>');return false}k+='<a href="http://twitter.com/'+i+'" title="'+l.description+'"><img src="'+l.profile_image_url+'" /></a><h4>'+l.name+'<span class="tweets-userinfo-username">(<a href="http://twitter.com/'+i+'">@'+i+'</a>)</span></h4><p class="tweets-userinfo-loc">Location: '+l.location+"</p><ul><li>Tweets: "+l.statuses_count+"</li><li>Following: "+l.friends_count+"</li><li>Followers: "+l.followers_count+"</li><li>Listed: "+l.listed_count+"</li></ul>";h.html(k)})};d.fn.fetchTweets=function(h){var j=d.extend(e,h||{});var n=j.username;var m=j.callback;var k=j.count;var g=j.refreshInterval;var l=d(this);var i;d.ajaxSetup({cache:j.cache});if(j.showUserInfo===true){b(l,n)}i=f(l,n,k,m);if(typeof g==="number"&&g>0){setInterval(function(){i()},g*1000)}i()}})(jQuery);