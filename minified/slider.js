jQuery(function(F){if(F("#banner #prev").length==0){return}var n=F.pixelentity&&F.pixelentity.kenburns&&F("#banner").attr("data-animate");var q=F("#banner #infoPanel");var g=F("#banner #navigator ul").find("li").remove().end();var p=F('<div id="spinner"></div>');var O=F('<div id="videooverlay"></div>');var o=800;var z=0;var l;var E=-1;var R=[];var s=false;var J=F("#banner").width();var T=F("#banner").height();var j=false;var v=-1;var c=false;var Q=false;var k=false;var S=false;var e=F("#banner").css("background-color").replace(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/g,H);var A=F.flash.available;var i={width:J,height:T,left:0,overflow:"hidden",visible:true,display:"block",opacity:0};var K="next";function f(b){if(b){q.animate({left:0},o,"easeOutExpo");F("#openInfo").fadeOut(o);F("#closeInfo").fadeIn(o)}else{q.animate({left:-q.width()+32},o,"easeOutExpo");if(!S){F("#openInfo").fadeIn(o)}F("#closeInfo").fadeOut(o)}}function X(){f(false)}function d(ac,ab,ae){ae=ac?ae:"fade";o=ae=="swipe"?700:1000;l=ab;function aa(){G();if(ac){ac.fadeOut(0);ac.find("img:eq(0)").css("margin-left",0)}}if(ac){var Y=ac.find("img:eq(0)").data("kenburns");if(Y){Y.stop()}}if(ab.find("a.video").length>0){O.fadeIn(0);if(!A){var ad=F("<a>");ad.attr("href",ab.find("a.video").attr("href")).attr("target","_blank");ad.width(O.width()).height(O.height()).css("position","absolute").show();O.empty().append(ad)}}else{O.empty().fadeOut(0)}switch(ae){case"fade":if(ac){ac.fadeOut(o)}ab.fadeIn(o,G);break;case"whitefade":ab.fadeOut(0);ac.fadeOut(o/2,"easeOutQuad",function(){ab.fadeIn(o/2,"easeInQuad",G)});break;case"flyBy":if(K=="next"){ac.fadeIn(0).css("opacity",1).css("left",0);ab.fadeIn(0).css("opacity",0).css("left",50);ac.animate({left:-100,opacity:0},o,"easeOutCubic");ab.animate({left:0,opacity:1},o,"easeOutCubic",G)}else{ac.fadeIn(0).css("opacity",1).css("left",0);ab.fadeIn(0).css("opacity",0).css("left",-50);ac.animate({left:100,opacity:0},o,"easeOutCubic");ab.animate({left:0,opacity:1},o,"easeOutCubic",G)}break;case"swipe":var w;var b=100;ab.css(i);if(ac){ac.css(i).css("opacity",1)}w=(K=="next")?ab.find("img:eq(0)"):ac?ac.find("img:eq(0)"):null;function Z(af,ah){var ag=Math.round(af*J);var ai=Math.round(b*(1-af));ab.css("left",-ai).width(ag+b);if(w){w.css("margin-left",-ag)}if(ac){ac.css("opacity",0.5+0.5*(1-af)).css("left",ag+b-ai).width(J-ag)}}function h(af,ah){var ag=Math.round(af*J);var ai=Math.round(b*(1-af));ab.css("left",J-ag+ai).width(ag);if(w){w.css("margin-left",ag-J)}if(ac){ac.css("opacity",0.5+0.5*(1-af)).css("left",ai-b).width(J-ag+b)}}ab.animate({opacity:1},{duration:o,easing:"easeOutCubic",complete:aa,step:K=="next"?h:Z});break}}function G(){s=false}function I(b){s=false;r(parseInt(b.target.id),true)}function V(w,h){var b=R[w].resource;if(!b){return true}var Y=F(b).attr("src")?"":F(b).attr("data-src");if(Y){F(b).attr("src",Y)}if(!b.complete){if(h){F(b).one("load",h)}}return b.complete}function r(b,Y){if(E!=b&&!s){s=true;if(!Y&&!V(b,I)){p.fadeIn(500);return}a();V(L(b,"next"));g.find("a").removeClass("currentSlide").eq(b).addClass("currentSlide");q.find("#info").replaceWith(R[b].caption);z=E=b;p.fadeOut(100);var ab=M.filter(".active").removeClass("active");var aa=M.eq(b).addClass("active");var Z=aa.attr("data-transition")||"swipe";var h;if(n){h=aa.find("img");if(h){Z="fade"}}var w=aa.attr("data-delay");if(w){v=parseFloat(w)*4}aa.show().fadeOut(0);if(h){h.kenburns({zoom:aa.attr("data-zoom"),align:aa.attr("data-align"),pan:aa.attr("data-pan"),duration:aa.attr("data-duration")})}d(ab[0]?ab:null,aa,Z);if(k){k=false;setTimeout(X,1000)}}}function D(){if(c||v<0){return}if(v==0){r(L(z,"next"))}v--}function y(b){f(b.currentTarget.id=="openInfo");return false}function L(w,b){var h=w;h+=(b=="prev"?-1:1);h%=R.length;if(h<0){h+=R.length}return h}function N(b){K=b.currentTarget.id;r(L(z,K));return false}function u(h){var b=parseInt(h.currentTarget.id);K=b>=z?"next":"prev";r(b);return false}function m(h,Y){var Z=F(Y).attr("id",h);var w=Z.find(" > div").detach().attr({id:"info"}).get(0);var b=Z.find("img").attr({id:h})[0];R[h]={caption:w,resource:b};g.append('<li><a href="#" '+(h==0?'class="currentSlide"':"")+' id="'+h+'">1</a></li>')}function C(){p.empty();j=false;if(!Q){c=false}}function a(){if(j){p.css("background-color","none");p.fadeOut(500,C);O.fadeIn(0);F("#closeVideo").fadeOut(500);var b=M.filter(".active").find("img:eq(0)").data("kenburns");if(b){b.resume()}}return false}function x(h,ab,w,b){if(j){return false}var ac,aa;if(ac=h.match(/http:\/\/www.youtube.com\/watch\?v=(\w+)/)){aa="youtube"}else{if(ac=h.match(/http:\/\/vimeo.com\/(\w+)/)){aa="vimeo"}}if(aa){a();j=true;c=true;var Z=M.filter(".active").find("img:eq(0)").data("kenburns");if(Z){Z.pause()}p.css("background-color",e);p.fadeIn(500);O.fadeOut(0);f(false);F("#closeVideo").fadeIn(500);var Y=p.vid({type:aa,videoId:ac[1],hd:ab,autoPlay:w,loop:b,bgcolor:e})}}function B(h){var b=F(h.currentTarget);if(b.hasClass("video")){x(b[0].href,b.hasClass("hd"),b.hasClass("autoplay"),b.hasClass("loop"));return false}return true}function t(b){switch(b.type){case"mouseenter":c=true;Q=true;break;case"mouseleave":if(!j){c=false}Q=false;break}}function W(){var b=l.find("a.video");if(b.length>0){b.trigger("click")}}function H(w,aa,Z,h){var Y=(1<<24)|(parseInt(aa)<<16)|(parseInt(Z)<<8)|parseInt(h);return"#"+Y.toString(16).substr(1)}var U=F("#banner").find("#closeInfo, #openInfo").click(y).end().find("#prev, #next").click(N).end().find("#closeVideo").click(a).end().bind("mouseenter",t).bind("mouseleave",t);var P=o;o=0;switch(U.attr("data-panel")){case"hidden":f(false,0);break;case"hideOnFirst":k=true;break;case"disabled":f(false,0);S=true;F("#openInfo").hide();break}o=P;var M=F("#banner #slides > div");if(F.browser.msie&&F.browser.version>8){M.find("img").each(function(){var b=F(this);if(!b.attr("data-src")){b.attr("data-src",b.attr("src"));b.removeAttr("src")}}).end()}M.width(J).height(T).show().fadeOut(0).removeClass("active").find("img[src*='img/icons/blank.png']").removeAttr("src").end().find("a").click(B).end().each(m).end();g.find("a").click(u);if(A){O.hide().click(W)}F("#banner #slides").append(p).append(O);p.width(J-64).height(T).css("padding","0px 32px 0px 32px");r(0);setInterval(D,250)});